StreamPy - near realtime dataflow python framework

Требования:

1) околореалтаймовость - всю цепочку в условную дюжину 
	обработчиков пакет должен проходить за время порядка нескольки сотых секунды. 

2) возможность балансировки нагрузки, исполнение на множестве нод.

3) пакетная передача данных. т.е. работа идёт на уровне минибатчей, 
	пусть и содержащих по одному или более единиц данных.

4) произвольное (направленный граф) соединение узлов обработки по конфигурационным данным.
	т.е. составляем процессы обработки

5) в рамках одной системы может быть несколько процессов обработки

6) один процесс обработки может быть разбит на несколько сегментов, 
	сегменты между собой комуницируют по сети

7) узлы в рамках сегмента комуницируют в общей памяти, без io затрат

8) каждый узл на входе имеет настраиваемую очередь, 
	по ней мониторится перегрузка, формируются батчи

9) масштабирование происходит за счет запуска нескольких сегментов на ноде 
	и расбрасывания нагрузки кубернейтовским сервисом 

Пример решаемой задачи:

Нужно разметить видео с нескольких камер, выделить людей, 
идентифицировать лица, построить обратный видеопоток с внедренными подписями
и сопроводительную информацию.
Видеопотоки поступают на локальный сервера, 
на которых поднят первый сегмент, реализующий обработку 
первичного видео и подготовительный процесс для распознавания. 
Второй сегмент в датацентре, там идёт распознание, идентификация по базе.

Первый сегмент:

1) Прием видеопотока, нарезка его на фреймы (поток->фреймы)

2) Ресайз фреймов под фиксированное разрешение (фреймы->малые фреймы)

3) Выделение нейросетью объектов на изображении (малые фреймы->разметка)

4) Вырезание по разметке лиц объектов (фрейм+разметка->лица)

5) Исходящий соединительный узел (лица)

11) Входящий соединительный узел (профиль)

12) Наносим разметку на фрейм (фреймы+разметка+профиль->размеченный фрейм)

13) Формируем исходящий поток (размеченный фрейм)

Второй сегмент:

1) Входящий соединительный узел (лица)

2) Получение дескриптора лица (лицо->дескриптор)

3) Идентификация лица по дескриптору и другие 
	взаимодействия с базой (дескриптор->данные профиля)

4) Добавление в датасет (если нужно) (лицо, профиль->ничего)

5) Исходящий соединительный узел (профиль)


Немного названий:

1) Таки не steampunk, а streamPy :) Больше жара на питоне. 

2) Узел (unit) - в нем производится работа. На вход поступает что-то, 
	через очереди, или же происходит внутренняя генерация, например по базе или файлу.
	На выходе соединён тоже с несколькими очередями других узлов. 
	Это всё в общем случае, будут ньюансы.

3) Труба (pipe) - очередь сообщений, на входе в узел. Почему очередь - чтоб была асинхронность.

4) Процесс (process) - Сборка узлов в рамках одной задачи, может представлять собой несколько сегментов, 
	в т.ч. запущеных параллельно. 

5) Сегмент (segment) - набор узлов работающих вместе в рамках общей памяти (как одна программа). 
	Может быть частью общего процесса, коммуницируя по средством специальных узлов по сети. 
	Может тиражироваться за счет нескольких экземпляров, как на одной ноде, так и на разных. 
	
	
Узлы определяются именем класса. Из класса через метод можно получить имя 
и конфигурацию входных и выходных труб. Там же можно указать отдельно что с чем соединяется.
Сначала мы создаём все очереди, потом создаём узлы (столько сколько указано для каждого узла 
в конфе, надо бы абстрагировать, чтоб через пул работать, поднимая и убивая динамические, по нагрузке), 
передавая используемые ими очереди как аргументы. Стартуем всё, если процесс умирает - тушим всё.

	
